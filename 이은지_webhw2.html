<!DOCTYPE html>

<html>
<head>
    <title>hw2</title>
    <style>
        fieldset{width:300px;}
    </style>
    <script>
        var len;
        var str1 = "";
        var str2 = "";

        function randMake(min, max){
            return Math.floor(Math.random()*(max-min+1))+min;}

        function randLength() {
            len = randMake(20, 50);
        }

        function randStr() {
            randLength();
            str = "";
            for (var i = 0; i < len; i++) {
                var ch1 = String.fromCharCode(randMake(32, 126));
                str1 += ch1;
            }
            alert(str1);
        }

        function find_ch() {
            if (str1 == "") {
                alert("랜덤 문자열을 먼저 생성하세요.");
                return 0;
            }
            alert(str1);
            var flag = 0;
            var s = prompt("찾고자 하는 문자를 입력하세요.");
            if (s == null)
                return 0;
            var i = 0;
            document.write(str1+"<br>");
            document.write("인덱스 : ");
            while (1) {
                if (str1.indexOf(s, i) != -1) {
                    var a = str1.indexOf(s, i);
                    document.write(str1.indexOf(s,i) + " ");
                    i = a + 1;
                    flag = 1;
                }
                else
                    break;
            }
            if (flag == 0)
                document.write(s + " 문자는 없습니다.");
        }

        function changeStr(a,i,c) {
            str2 = str2.concat(str1.slice(a, i));
            str2 = str2.concat(c);
        }

        function replace_ch() {
            if (str1 == "") {
                alert("랜덤 문자열을 먼저 생성하세요.");
                return 0;
            }
            var a = 0;
            var r = prompt("문자를 하나 입력하세요");
            if (r == null)
                return 0;
            if (parseInt(r) >= 0 && parseInt(r) <= 9){
                for (var i = 0; i < str1.length; i++) {
                    if (str1.charCodeAt(i) >= 48 && str1.charCodeAt(i) <= 57)
                        0;
                    else{
                        changeStr(a, i, "-");
                        a = i+1;
                    }
                }
            }
            else if ((r.charCodeAt(0) >= 65 && r.charCodeAt(0) <= 90) ||
                (r.charCodeAt(0) >= 97 && r.charCodeAt(0) <= 122)) {
                for (var i = 0; i < str1.length; i++) {
                    if ((str1.charCodeAt(i) >= 65 && str1.charCodeAt(i) <= 90) ||
                        (str1.charCodeAt(i) >= 97 && str1.charCodeAt(i) <= 122))
                        0;
                    else{
                        changeStr(a, i, "-");
                        a = i+1;
                    }
                }
            }
            else {
                for (var i = 0; i < str1.length; i++) {
                    if ((str1.charCodeAt(i) >= 65 && str1.charCodeAt(i) <= 90) ||
                        (str1.charCodeAt(i) >= 97 && str1.charCodeAt(i) <= 122) ||
                        (str1.charCodeAt(i) >= 48 && str1.charCodeAt(i) <= 57)) {
                        changeStr(a, i, "0");
                        a = i + 1;
                    }
                }
            }
            str2 = str2.concat(str1.slice(a, str1.length));
            document.write("변환 전 : " + str1+"<br>");
            document.write("변환결과: " + str2 + "<br>");
        }
    </script>
</head>
<body>
    <form>
    <fieldset>
        <legend>랜덤 문자열</legend>
        <input type="button" value="랜덤문자열생성" onclick="randStr();" /><br />
        <input type="button" value="문자검색" onclick="find_ch();" />
        <input type="button" value="문자대체" onclick="replace_ch();" >
        </fieldset>
    </form>
</body>
</html>
